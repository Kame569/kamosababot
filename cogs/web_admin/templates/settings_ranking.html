{% extends "base.html" %}
{% block content %}

<h1>Ranking 設定</h1>

<div class="glass-card">
  <label>有効化</label>
  <input id="rank_enabled" type="checkbox" {% if cfg.rank.enabled %}checked{% endif %}>

  <label>Embed タイトル</label>
  <input id="rank_title" class="input" value="{{ cfg.rank.embed.title }}">

  <label>Embed 説明</label>
  <textarea id="rank_desc" class="textarea" rows="6">{{ cfg.rank.embed.description }}</textarea>

  <label>カラー（#RRGGBB）</label>
  <input id="rank_color" class="input" value="{{ cfg.rank.embed.color }}">

  <div class="divider"></div>

  <h3>Leaderboard</h3>
  <label>有効化</label>
  <input id="lb_enabled" type="checkbox" {% if cfg.rank.leaderboard.enabled %}checked{% endif %}>

  <label>設置先チャンネル</label>
  <div class="select-wrap">
    <select id="lb_channel" class="select">
      <option value="">(未指定)</option>
      {% for ch in channels %}
        <option value="{{ ch.id }}" {% if cfg.rank.leaderboard.channel_id|string == ch.id %}selected{% endif %}>#{{ ch.name }}</option>
      {% endfor %}
    </select>
    <span class="chev">▾</span>
  </div>

  <label>更新間隔（分）</label>
  <input id="lb_interval" type="number" class="input" min="1" value="{{ cfg.rank.leaderboard.interval_minutes }}">

  <div class="actions">
    <button class="btn primary" onclick="rankSave('{{ guild.id }}')">保存</button>
    <button class="btn" onclick="rankDeploy('{{ guild.id }}')">Discordに設置</button>
  </div>
</div>

<script id="cfg-json" type="application/json">{{ cfg | tojson }}</script>

{% endblock %}
