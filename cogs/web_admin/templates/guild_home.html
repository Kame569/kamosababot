{% extends "base.html" %}
{% block content %}

<div class="card pad">
  <div style="display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;align-items:center">
    <div>
      <div style="font-size:20px;font-weight:900">æ¦‚è¦</div>
      <div style="margin-top:6px;color:var(--muted);font-size:12px">{{ guild.name if guild else "" }}</div>
    </div>
    <div class="pill">Guild ID: {{ guild.id if guild else "" }}</div>
  </div>
</div>

<div class="grid" style="margin-top:16px">
  <div class="col-6">
    <div class="card pad">
      <div class="pill">ğŸ’¬ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆä»Šæ—¥ï¼‰</div>
      <div style="font-size:28px;font-weight:900;margin-top:10px">{{ stats.messages[-1] }}</div>
      <div style="color:var(--muted);font-size:12px;margin-top:6px">ç›´è¿‘7æ—¥åˆ†ã®ã‚«ã‚¦ãƒ³ãƒˆ</div>
    </div>
  </div>

  <div class="col-6">
    <div class="card pad">
      <div class="pill">ğŸ‘¥ ãƒ¡ãƒ³ãƒãƒ¼</div>
      <div style="font-size:28px;font-weight:900;margin-top:10px">{{ guild.member_count if guild else 0 }}</div>
      <div style="color:var(--muted);font-size:12px;margin-top:6px">Discordå´ã®å€¤</div>
    </div>
  </div>

  <div class="col-12">
    <div class="card pad">
      <div style="font-weight:900">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡å±¥æ­´</div>
      <div style="margin-top:10px">
        <canvas id="msgChart"></canvas>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
(function(){
  const ctx = document.getElementById('msgChart').getContext('2d');
  new Chart(ctx, {
    type: 'line',
    data: {
      labels: {{ stats.dates | tojson }},
      datasets: [{
        label: 'Messages',
        data: {{ stats.messages | tojson }},
        fill: true,
        tension: 0.35
      }]
    },
    options: {
      responsive: true,
      plugins: { legend: { display: false } },
      scales: {
        x: { grid: { display:false } },
        y: { beginAtZero: true }
      }
    }
  });
})();
</script>

{% endblock %}
